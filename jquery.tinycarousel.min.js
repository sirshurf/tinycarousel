(function(e){function t(t,n){function g(){if(n.controls){a.toggleClass("disable",h<=0);u.toggleClass("disable",!(h+1<c))}if(n.pager){var t=e(".pagenum",f);t.removeClass("active");e(t[h]).addClass("active")}}function y(t){if(e(this).hasClass("pagenum")){r.move(parseInt(this.rel,10),true)}return false}function b(){if(n.interval&&!d){clearTimeout(p);p=setTimeout(function(){h=h+1===c?-1:h;v=h+1===c?false:h===0?true:v;r.move(v?1:-1)},n.intervaltime)}}function w(){if(n.controls&&a.length>0&&u.length>0){a.click(function(){r.move(-1);return false});u.click(function(){r.move(1);return false})}if(n.interval){t.hover(r.stop,r.start)}if(n.pager&&f.length>0){e("a",f).click(y)}}function E(){if(m){l=e(o[0]).outerWidth(true);e(o).each(function(){if(e(this).outerWidth(true)>l)l=e(this).outerWidth(true)})}else{l=e(o[0]).outerHeight(true);e(o).each(function(){if(e(this).outerHeight(true)>l)l=e(this).outerHeight(true)})}var t=Math.ceil((m?i.outerWidth():i.outerHeight())/(l*n.display)-1);c=Math.max(1,Math.ceil(o.length/n.display)-t);h=Math.min(c,Math.max(1,n.start))-2;s.css(m?"width":"height",l*o.length);r.move(1);w();return r}var r=this,i=e(".viewport:first",t),s=e(".overview:first",t),o=s.children(),u=e(".next:first",t),a=e(".prev:first",t),f=e(".pager:first",t),l=0,c=0,h=0,p=undefined,d=false,v=true,m=n.axis==="x";this.stop=function(){clearTimeout(p);d=true};this.start=function(){d=false;b()};this.move=function(e,t){h=t?e:h+=e;if(h>-1&&h<c){var r={};r[m?"left":"top"]=-(h*l*n.display);s.animate(r,{queue:false,duration:n.animation?n.duration:0,complete:function(){if(typeof n.callback==="function"){n.callback.call(this,o[h],h)}}});g();b()}};return E()}e.tiny=e.tiny||{};e.tiny.carousel={options:{start:1,display:1,axis:"x",controls:true,pager:false,interval:false,intervaltime:3e3,rewind:false,animation:true,duration:1e3,callback:null}};e.fn.tinycarousel_start=function(){e(this).data("tcl").start()};e.fn.tinycarousel_stop=function(){e(this).data("tcl").stop()};e.fn.tinycarousel_move=function(t){e(this).data("tcl").move(t-1,true)};e.fn.tinycarousel=function(n){var r=e.extend({},e.tiny.carousel.options,n);this.each(function(){e(this).data("tcl",new t(e(this),r))});return this}})(jQuery)
